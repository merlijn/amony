include required(classpath("amony-common.conf"))

amony {
  api {
    host-name = "0.0.0.0"
    request-timeout = 5s
    web-client-path = /usr/amony/web-client
    enable-admin = false

    http {
      enabled = true
      enabled = ${?ENABLE_HTTP}
      port = 8080
    }

    https {
      enabled = false
      enabled = ${?ENABLE_HTTPS}
      port = 443
      private-key-pem = "/usr/amony/certs/privkey.pem"
      certificate-chain-pem = "/usr/amony/certs/fullchain.pem"
    }
  }

  media {
    library-path = /usr/amony/videos
    scan-parallel-factor = 4
    verify-existing-hashes = false
    hashing-algorithm = "partial-hash"

      previews {
        # the video codec used to transcode
        video-codec = "libx264"

        # the video quality for transcoding, range 0 - 51, For x264, sane values are between 18 and 28
        # https://slhck.info/video/2017/02/24/crf-guide.html
        video-crf = 23

        # if specified will override the fps, default will take from the original video
        # video-fps = 12

        # the height of the thumbnails and video fragments, width is scaled proportional
        scale-height = 320

        minimum-fragment-duration = 1 seconds

        maximum-fragment-duration = 30 seconds
      }
  }
}
