version = 3.10.2
runner.dialect = scala3

# Line length
maxColumn = 150

# Indentation - 2 spaces is consistently used in the codebase
continuationIndent.callSite = 2
continuationIndent.defnSite = 2

danglingParentheses.defnSite = true

indent.main = 2

align.preset = most
align.tokens."+" = [
  { code = "=" }
]
align.multiline = true
align.arrowEnumeratorGenerator = true

# Newlines - code shows significant newline usage
newlines.source = keep
newlines.beforeCurlyLambdaParams = never
newlines.afterCurlyLambda = preserve
newlines.implicitParamListModifierPrefer = before

# Spaces - maintain spaces around operators and after colons
spaces.inImportCurlyBraces = false
spaces.afterKeywordBeforeParen = true

# Rewrite rules
rewrite.rules = [
  PreferCurlyFors,
  RedundantBraces,
  RedundantParens,
  SortModifiers
]

# Don't aggressively remove braces in match/if/while
rewrite.redundantBraces.maxLines = 1
rewrite.redundantBraces.stringInterpolation = true

# Imports - keep wildcard imports as used in codebase
rewrite.imports.sort = ascii
rewrite.imports.groups = [
  ["java\\..*", "javax\\..*", "scala\\..*"],
  [".*"],
  ["nl\\.amony\\..*"]
]

rewrite.trailingCommas = never

rewrite.scala3.convertToNewSyntax = true

# Vertical alignment in multiline expressions
# verticalMultiline.atDefnSite = true
# verticalMultiline.arityThreshold = 3

# Docstrings
docstrings.style = keep
docstrings.wrap = no

# Optional braces (Scala 3 feature) - keep current usage pattern
runner.dialectOverride.allowSignificantIndentation = true
runner.dialectOverride.allowEndMarker = true

